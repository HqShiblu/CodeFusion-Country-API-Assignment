# CodeFusion Country API Assignment
Read the specifications [here](https://workdrive.zohopublic.eu/file/j2a2g0216a20eacd84923aa639dae1710f712).

## Requirements
- Python 3.12 or above.
- PostgreSQL 14 or above.

## Getting started
First, Create a database in PostgreSQL.

Clone the repository from [GitHub](https://github.com/HqShiblu/CodeFusion-Country-API-Assignment).
Open the .sample_env file.
Enter the SECRET_KEY value and database credentials and then save it as **.env** file.

Create a virtual environment.
Use **python** in **Windows** and **python3** in **Linux**.
```
python -m venv country_api_venv
```

Move to Scripts (for **Windows**) or bin (for **Linux**) folder of the environment.
Then activate the environment.

Then, move to the location of the project where **manage.py** file is.
Install the required packages with 
```
pip install -r requirements.txt
```
Use **pip** in **Windows** and **pip3** in **Linux**.


Now, run
```
python manage.py migrate
```
to migrate the models to the database.



### Phase 1
Run
```
python manage.py seed_data
```
to fetch and save the country data to the database.


### Phase 2
#### Authentication
The APIs can be accessed only by authenticated users.
So, create a user first from the command line
```
python manage.py createsuperuser
```
Provide username and password.

Now, hit the URL

`POST /api/login/`

with 

```
{
    "username":"your_username",
    "password":"your_password"
}
```
Provide your username and password in the parameter

If username and password are correct it will return something like this
```
{
	"message": "Success",
	"status": 200,
	"token": "Token generated by the app................."
}
```
Copy the token and send it as a **Bearer** token in **Authorization Header** in rest of the URLs in **Phase 2** .

### List all countries

`GET /api/get-all-countries/`

It will return a list of all the countries in the database.

### Retreive details of a specific country

`GET get-specific-county/{id}/`

Insert the id of the country in the **id** variable.


